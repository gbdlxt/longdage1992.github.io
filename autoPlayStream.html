<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button onclick="addVideo()">addVideo</button>
    <div id="externerCon"></div>

    <script>
      const externerCon = document.querySelector("#externerCon")
      document.addEventListener("WeixinJSBridgeReady", addVideo)

      // ios 微信内置浏览器自动播放，可在WeixinJSBridgeReady事件1000毫秒内创建播放器资源池，拉流时分配播放器，替换流媒体资源即可
      // 注意，这个时间内创建的播放器可以复用，替换源即可
      // 为什么是1000毫秒内才生效？受浏览器安全策略影响，需要手动交互才能播放，1000毫秒判定为交互范围。
      function addVideo() {
        setTimeout(() => {
            externerCon.innerHTML = `<video id="externerVideo" crossorigin="anonymous" playsinline="" autoplay controls="" loop=""></video>`
        }, 0) // 1000毫秒内创建才能生效。

        setTimeout(() => {
          externerVideo = document.querySelector("#externerVideo")
          externerVideo.src="https://zego-public.oss-cn-shanghai.aliyuncs.com/sdk-doc/assets/big_buck_bunny.mp4";
          // externerVideo.play();
        }, 3000)// 模拟任意时间，从播放器资源池拿到播放器播放
      }

      
    </script>
  </body>
</html>
